var products = {
  "iphone15": {
    "name": "Iphone 15 promax 1T",
    "company": "Iphone",
    "img": "img/sanpham/ip152.webp",
    "price": "34.790.000",
    "star": "5",
    "rateCount": 7,
    "promo": {
      "name": "gi·∫£m gi√°",
      "value": "250.000"
    },
    "detail": {
      "screen": "IPS LCD, 5.8', HD+",
      "os": "Android One",
      "camara": "13 MP v√† 5 MP (2 camera)",
      "camaraFront": "8 MP",
      "cpu": "MediaTek Helio P60 8 nh√¢n 64-bit",
      "ram": "3 GB",
      "rom": "32 GB",
      "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
      "battery": "3060 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"SamSung Galaxy J4+": {
    "name": "SamSung Galaxy J4+",
    "company": "Samsung",
    "img": "img/products/samsung-galaxy-j4-plus-pink-400x400.jpg",
    "price": "3.490.000",
    "star": 3,
    "rateCount": 26,
    "promo": {
        "name": "tragop",
        "value": "0"
    },
    "detail": {
        "screen": "IPS LCD, 6.0', HD+",
        "os": "Android 8.1 (Oreo)",
        "camara": "13 MP",
        "camaraFront": "5 MP",
        "cpu": "Qualcomm Snapdragon 425 4 nh√¢n 64-bit",
        "ram": "2 GB",
        "rom": "16 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3300 mAh"
    },
    "masp": "Nok0"
  },
  "Xiaomi Mi 8 Lite": {
    "name": "Xiaomi Mi 8 Lite",
    "company": "Xiaomi",
    "img": "img/products/xiaomi-mi-8-lite-black-1-600x600.jpg",
    "price": "6.690.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "tragop",
        "value": "0"
    },
    "detail": {
        "screen": "IPS LCD, 6.26', Full HD+",
        "os": "Android 8.1 (Oreo)",
        "camara": "12 MP v√† 5 MP (2 camera)",
        "camaraFront": "24 MP",
        "cpu": "Qualcomm Snapdragon 660 8 nh√¢n",
        "ram": "4 GB",
        "rom": "64 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 512 GB",
        "battery": "3300 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"Oppo F9": {
    "name": "Oppo F9",
    "company": "Oppo",
    "img": "img/products/oppo-f9-red-600x600.jpg",
    "price": "7.690.000",
    "star": 5,
    "rateCount": 188,
    "promo": {
        "name": "giamgia",
        "value": "500.000"
    },
    "detail": {
        "screen": "LTPS LCD, 6.3', Full HD+",
        "os": "ColorOS 5.2 (Android 8.1)",
        "camara": "16 MP v√† 2 MP (2 camera)",
        "camaraFront": "25 MP",
        "cpu": "MediaTek Helio P60 8 nh√¢n 64-bit",
        "ram": "4 GB",
        "rom": "64 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3500 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"Nokia 5.1 Plus": {
    "name": "Nokia 5.1 Plus",
    "company": "Nokia",
    "img": "img/products/nokia-51-plus-black-18thangbh-400x400.jpg",
    "price": "4.790.000",
    "star": 5,
    "rateCount": 7,
    "promo": {
        "name": "giamgia",
        "value": "250.000"
    },
    "detail": {
        "screen": "IPS LCD, 5.8', HD+",
        "os": "Android One",
        "camara": "13 MP v√† 5 MP (2 camera)",
        "camaraFront": "8 MP",
        "cpu": "MediaTek Helio P60 8 nh√¢n 64-bit",
        "ram": "3 GB",
        "rom": "32 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3060 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"Samsung Galaxy A8+ (2018)": {
    "name": "Samsung Galaxy A8+ (2018)",
    "company": "Samsung",
    "img": "img/products/samsung-galaxy-a8-plus-2018-gold-600x600.jpg",
    "price": "11.990.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "giamgia",
        "value": "1.500.000"
    },
    "detail": {
        "screen": "Super AMOLED, 6', Full HD+",
        "os": "Android 7.1 (Nougat)",
        "camara": "16 MP",
        "camaraFront": "16 MP v√† 8 MP (2 camera)",
        "cpu": "Exynos 7885 8 nh√¢n 64-bit",
        "ram": "6 GB",
        "rom": "64 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3500 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"iPhone X 256GB Silver": {
    "name": "iPhone X 256GB Silver",
    "company": "Apple",
    "img": "img/products/iphone-x-256gb-silver-400x400.jpg",
    "price": "31.990.000",
    "star": 4,
    "rateCount": 10,
    "promo": {
        "name": "giareonline",
        "value": "27.990.000"
    },
    "detail": {
        "screen": "OLED, 5.8', Super Retina",
        "os": "iOS 11",
        "camara": "2 camera 12 MP",
        "camaraFront": "7 MP",
        "cpu": "Apple A11 Bionic 6 nh√¢n",
        "ram": "3 GB",
        "rom": "256 GB",
        "microUSB": "Kh√¥ng",
        "battery": "2716 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"Oppo A3s 32GB": {
    "name": "Oppo A3s 32GB",
    "company": "Oppo",
    "img": "img/products/oppo-a3s-32gb-600x600.jpg",
    "price": "4.690.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "tragop",
        "value": "0"
    },
    "detail": {
        "screen": "IPS LCD, 6.2', HD+",
        "os": "Android 8.1 (Oreo)",
        "camara": "13 MP v√† 2 MP (2 camera)",
        "camaraFront": "8 MP",
        "cpu": "Qualcomm Snapdragon 450 8 nh√¢n 64-bit",
        "ram": "3 GB",
        "rom": "32 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "4230 mAh"
    },
    "masp": "Nok0"
  },"Samsung Galaxy J8": {
    "name": "Samsung Galaxy J8",
    "company": "Samsung",
    "img": "img/products/samsung-galaxy-j8-600x600-600x600.jpg",
    "price": "6.290.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "giamgia",
        "value": "500.000"
    },
    "detail": {
        "screen": "Super AMOLED, 6.0', HD+",
        "os": "Android 8.0 (Oreo)",
        "camara": "16 MP v√† 5 MP (2 camera)",
        "camaraFront": "16 MP",
        "cpu": "Qualcomm Snapdragon 450 8 nh√¢n 64-bit",
        "ram": "3 GB",
        "rom": "32 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3500 mAh"
    },
    "masp": "Nok0"
  },"iPad 2018 Wifi 32GB": {
    "name": "iPad 2018 Wifi 32GB",
    "company": "Apple",
    "img": "img/products/ipad-wifi-32gb-2018-thumb-600x600.jpg",
    "price": "8.990.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "tragop",
        "value": "0"
    },
    "detail": {
        "screen": "LED-backlit LCD, 9.7p''",
        "os": "\tiOS 11.3",
        "camara": "8 MP",
        "camaraFront": "1.2 MP",
        "cpu": "Apple A10 Fusion, 2.34 GHz",
        "ram": "2 GB",
        "rom": "32 GB",
        "microUSB": "Kh√¥ng",
        "battery": "Ch∆∞a c√≥ th√¥ng s·ªë c·ª• th·ªÉ"
    },
    "masp": "Nok0"
  },"iPhone 7 Plus 32GB": {
    "name": "iPhone 7 Plus 32GB",
    "company": "Apple",
    "img": "img/products/iphone-7-plus-32gb-hh-600x600.jpg",
    "price": "17.000.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "giareonline",
        "value": "16.990.000"
    },
    "detail": {
        "screen": "LED-backlit IPS LCD, 5.5', Retina HD",
        "os": "iOS 11",
        "camara": "2 camera 12 MP",
        "camaraFront": "7 MP",
        "cpu": "Apple A10 Fusion 4 nh√¢n 64-bit",
        "ram": "3 GB",
        "rom": "32 GB",
        "microUSB": "Kh√¥ng",
        "battery": "2900 mAh"
    },
    "masp": "Nok0"
  },"Xiaomi Mi 8": {
    "name": "Xiaomi Mi 8",
    "company": "Xiaomi",
    "img": "img/products/xiaomi-mi-8-1-600x600.jpg",
    "price": "12.990.000",
    "star": 0,
    "rateCount": 0,
    "promo": {
        "name": "",
        "value": "0"
    },
    "detail": {
        "screen": "IPS LCD, 6.26', Full HD+",
        "os": "Android 8.1 (Oreo)",
        "camara": "12 MP v√† 5 MP (2 camera)",
        "camaraFront": "24 MP",
        "cpu": "Qualcomm Snapdragon 660 8 nh√¢n",
        "ram": "4 GB",
        "rom": "64 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 512 GB",
        "battery": "3300 mAh, c√≥ s·∫°c nhanh"
    },
    "masp": "Nok0"
  },"Mobiistar X": {
    "name": "Mobiistar X",
    "company": "Mobiistar",
    "img": "img/products/mobiistar-x-3-600x600.jpg",
    "price": "3.490.000",
    "star": 4,
    "rateCount": 16,
    "promo": {
        "name": "tragop",
        "value": "0"
    },
    "detail": {
        "screen": "IPS LCD, 5.86', HD+",
        "os": "Android 8.1 (Oreo)",
        "camara": "16 MP v√† 5 MP (2 camera)",
        "camaraFront": "16 MP",
        "cpu": "MediaTek MT6762 8 nh√¢n 64-bit (Helio P22)",
        "ram": "4 GB",
        "rom": "32 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 256 GB",
        "battery": "3000 mAh"    },
    "masp": "Nok0"
  },"Mobiistar Zumbo S2 Dual": {
    "name": "Mobiistar Zumbo S2 Dual",
    "company": "Mobiistar",
    "img": "img/products/mobiistar-zumbo-s2-dual-300x300.jpg",
    "price": "2.850.000",
    "star": 4,
    "rateCount": 104,
    "promo": {
        "name": "moiramat",
        "value": ""
    },
    "detail": {
        "screen": "IPS LCD, 5.5', Full HD",
        "os": "Android 7.0 (Nougat)",
        "camara": "13 MP",
        "camaraFront": "13 MP v√† 8 MP (2 camera)",
        "cpu": "MT6737T, 4 nh√¢n",
        "ram": "3 GB",
        "rom": "32 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 128 GB",
        "battery": "3000 mAh"
    },
    "masp": "Nok0"
  },"Mobiistar E Selfie": {
    "name": "Mobiistar E Selfie",
    "company": "Mobiistar",
    "img": "img/products/mobiistar-e-selfie-300-1copy-600x600.jpg",
    "price": "2.490.000",
    "star": 4,
    "rateCount": 80,
    "promo": {
        "name": "",
        "value": ""
    },
    "detail": {
        "screen": "IPS LCD, 6.0', HD+",
        "os": "Android 7.0 (Nougat)",
        "camara": "13 MP",
        "camaraFront": "13 MP",
        "cpu": "MediaTek MT6739 4 nh√¢n 64-bit",
        "ram": "2 GB",
        "rom": "16 GB",
        "microUSB": "MicroSD, h·ªó tr·ª£ t·ªëi ƒëa 128 GB",
        "battery": "3900 mAh"
    },
    "masp": "Nok0"
  }
  // th√™m c√°c s·∫£n ph·∫©m kh√°c t·∫°i ƒë√¢y
};
window.onload = function () {
  var productElements = document.getElementsByTagName('product-card');
  for (let i = 0; i < productElements.length; i++) {
    var productId = productElements[i].id;
    var productData = products[productId];
    productElements[i].innerHTML = '<div class="card">' +
      '<img src="' + productData.img + '" alt="' + productData.name + '" class="card-image" />' +
      '<div class="card-label">' +
      '<span>' + productData.promo.name + '</span>' +
      '<span>' + productData.promo.value + ' </span>' +
      '</div>' +
      '<div class="card-name">' + productData.name + '</div>' +
      '<div class="card-price">' +
      '<span>' + productData.price + '</span>' +
      '<span>' + productData.star + ' ‚≠ê </span>' +
      '</div>' +
      // Th√™m n√∫t "Th√™m v√†o gi·ªè h√†ng" v√† "Mua ngay"
      '<div class="card-buttons" style="display: none;">' +
      '<button class="add-to-cart">üõí Th√™m v√†o gi·ªè h√†ng</button>' +
      '<button class="buy-now">Mua ngay</button>' +
      '</div>' +
      '</div>';
    productElements[i].dataset.productName = productData.name;
    productElements[i].addEventListener('click', function() {
      // T√¨m ph·∫ßn t·ª≠ 'chitiet' v·ªõi id t∆∞∆°ng ·ª©ng
      var detailElement = document.getElementById(this.id);
      if (detailElement) {
        // Cu·ªôn ƒë·∫øn ph·∫ßn t·ª≠ 'chitiet'
        detailElement.scrollIntoView({behavior: "smooth"});
      }
    });
    // Th√™m s·ª± ki·ªán mouseover v√† mouseout
    productElements[i].addEventListener('mouseover', function() {
      this.querySelector('.card-buttons').style.display = 'block'; // Hi·ªÉn th·ªã n√∫t khi di chu·ªôt v√†o
    });
    productElements[i].addEventListener('mouseout', function() {
      this.querySelector('.card-buttons').style.display = 'none'; // ·∫®n n√∫t khi di chu·ªôt ra
    });
  }



  var productElements = document.getElementsByTagName('chitiet');
  for (let i = 0; i < productElements.length; i++) {
    var productId = productElements[i].id;
    var productData = products[productId];
    productElements[i].innerHTML =' <div class="product">' +
   ' <div class="img">'+
     ' <div class="product-image">'+
        '<img src="' + productData.img + '" alt="+" class="card-image" />'+
     ' </div>'+
     
     ' <div class="image-slider">'+
     '<button class="slider-nav slider-prev">‚ùÆ</button>'+
       ' <img src="img/products/huawei-mate-20-pro-green-600x600.jpg" alt="Slide 1" class="slider-image" />'+
        '<img src="img/products/ipad-wifi-32gb-2018-thumb-600x600.jpg" alt="Slide 2" class="slider-image" />'+
       ' <img src="img/products/iphone-7-plus-32gb-hh-600x600.jpg" alt="Slide 3" class="slider-image" />'+
       ' <img src="img/products/mobiistar-b310-orange-600x600.jpg" alt="Slide 4" class="slider-image" />'+
        '<img src="img/products/huawei-mate-20-pro-green-600x600.jpg" alt="Slide 5" class="slider-image" />'+
       ' <img src="img/products/nokia-51-plus-black-18thangbh-400x400.jpg" alt="Slide 6" class="slider-image" />'+
       ' <img src="img/products/huawei-y5-2017-300x300.jpg" alt="Slide 7" class="slider-image" />'+
        '<img src="img/products/xiaomi-redmi-note-5-pro-600x600.jpg" alt="Slide8 " class="slider-image" />'+
       ' <button class="slider-nav slider-next">‚ùØ</button>'+
      '</div>'+
   ' </div>'+
   
    
      ' <div class="product-details"> '+
         '<div class="product-title"> '+ productData.name +'</div>' +
         '<div class="product-price"> '+ productData.price +'</div> '+
        ' <div class="specifications">' +
            productData.detail.screen +'<br>' +
            productData.detail.os +'<br> '+
            productData.detail.camara +'<br> '+
            productData.detail.camaraFront +'<br> '+
            productData.detail.cpu +'<br> '+
            productData.detail.ram +'<br> '+
            productData.detail.rom +'<br> '+
            productData.detail.microUSB +'<br> '+
            productData.detail.battery +
         '</div>' +
         '<div class="option-buttons"> '+
          ' <button class="option-button">128GB</button>' +
    
            
          ' <button class="option-button">512GB</button>' +
           '<button class="option-button">1TB</button>' +
         '</div>' +
         '<div class="product-stats">' +
           '<div class="product-rating">' + "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ " + productData.rateCount + " ƒë√°nh gi√°" +'</div>' +
          ' <div class="product-purchases">' + "üõí " + productData.rateCount + " l∆∞·ª£t mua" +'</div>' +
           '<div class="product-quantity">' + 
            
             '<input type="number" value="1" min="1" class="quantity-input"> '+
              
           '</div>' +
         '</div>' +
        ' <div class="buttons">' +
           '<div class="add-to-cart">'+ "üõí " + "Th√™m v√†o gi·ªè h√†ng" +'</div>' +
           '<div class="buy-now">' + "Mua ngay" +'</div>' +
         '</div>' +
         '<div class="promotion">' + "  KHUY·∫æN M√ÉI: S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c gi·∫£m  " + productData.promo.value + "  khi mua h√†ng online b·∫±ng th·∫ª VPBank ho·∫∑c tin nh·∫Øn SMS" +'</div>' +
       '</div>' +
     '</div>'
     var currentImageIndex = 0;
    var numVisibleImages = 5;

    // L·∫•y t·∫•t c·∫£ c√°c h√¨nh ·∫£nh trong slide
    var sliderImageElements = productElements[i].querySelectorAll('.slider-image');
    
    // Th√™m s·ª± ki·ªán click cho n√∫t "Prev"
    var sliderPrevButton = productElements[i].querySelector('.slider-prev');
    sliderPrevButton.addEventListener('click', function () {
      currentImageIndex = (currentImageIndex - 1 + sliderImageElements.length) % sliderImageElements.length;
      updateSliderImages();
    });

    // Th√™m s·ª± ki·ªán click cho n√∫t "Next"
    var sliderNextButton = productElements[i].querySelector('.slider-next');
    sliderNextButton.addEventListener('click', function () {
      currentImageIndex = (currentImageIndex + 1) % sliderImageElements.length;
      updateSliderImages();
    });

    // Th√™m h√†m c·∫≠p nh·∫≠t hi·ªÉn th·ªã cho h√¨nh ·∫£nh trong slide
    function updateSliderImages() {
      // Ki·ªÉm tra n·∫øu ch·ªâ m·ª•c hi·ªán t·∫°i v√† ch·ªâ m·ª•c k·∫øt th√∫c v∆∞·ª£t qu√° s·ªë l∆∞·ª£ng ·∫£nh
      if (currentImageIndex + numVisibleImages > sliderImageElements.length) {
        // ƒê·∫∑t l·∫°i ch·ªâ m·ª•c ƒë·ªÉ hi·ªÉn th·ªã 5 ·∫£nh t·ª´ ƒë·∫ßu
        currentImageIndex = Math.max(sliderImageElements.length - numVisibleImages, 0);
      }

      sliderImageElements.forEach(function (image, index) {
        var displayStyle = (index >= currentImageIndex && index < currentImageIndex + numVisibleImages) ? 'block' : 'none';
        image.style.display = displayStyle;
      });
    }
    
    // Hi·ªÉn th·ªã ban ƒë·∫ßu 5 h√¨nh ƒë·∫ßu ti√™n
    updateSliderImages();
    
     



  var addToCartButton = productElements[i].querySelector('.add-to-cart');
  addToCartButton.addEventListener('click', function () {
    let item = {
      img: productData.img,
      ten: productData.name,
      gia: productData.price
    };

    let mang = JSON.parse(localStorage.getItem('data')) || [];
    mang.push(item);
    localStorage.setItem('data', JSON.stringify(mang));

    // Ki·ªÉm tra gi·ªè h√†ng sau khi th√™m s·∫£n ph·∫©m
    console.log(mang);
    updateSoLuongTrongGio();
  });
  }
  
  
   
};    



